<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sam Pinkelman</title>
    <link rel="stylesheet" href="styles.css">
    <link id="favicon" rel="icon" type="image/png" href="">
</head>
<body>
    <!-- Background overlay -->
    <div id="background-overlay"></div>
    
    <!-- Admin button -->
    <button id="admin-btn" class="admin-btn" aria-label="Admin Login">Admin</button>
    
    <!-- Header -->
    <header class="header">
        <div class="logo-container">
            <img id="header-logo" src="" alt="Sam Pinkelman" class="logo">
        </div>
    </header>
    
    <!-- Navigation tabs -->
    <nav class="nav-tabs">
        <button class="tab-btn active" data-tab="photos">Photos</button>
        <button class="tab-btn" data-tab="essays">Essays</button>
        <button class="tab-btn" data-tab="video">Video</button>
    </nav>
    
    <!-- Main content area -->
    <main id="main-content" class="main-content">
        
        <!-- Photos tab content -->
        <div id="photos-tab" class="tab-content active">
            <div class="admin-controls" id="photos-admin-controls">
                <div class="admin-actions">
                    <button class="glass-btn" id="create-album-btn">Create Album</button>
                    <button class="glass-btn" id="reorder-albums-btn">Reorder Albums</button>
                </div>
            </div>
            <div id="albums-grid" class="albums-grid"></div>
        </div>
        
        <!-- Essays tab content -->
        <div id="essays-tab" class="tab-content">
            <div class="admin-controls" id="essays-admin-controls">
                <div class="admin-actions">
                    <button class="glass-btn" id="upload-essay-btn">Upload PDF</button>
                    <input type="file" id="essay-file-input" accept=".pdf" multiple style="display: none;">
                </div>
            </div>
            <div id="essays-grid" class="essays-grid"></div>
        </div>
        
        <!-- Video tab content -->
        <div id="video-tab" class="tab-content">
            <div class="admin-controls" id="video-admin-controls">
                <div class="admin-actions">
                    <button class="glass-btn" id="add-video-btn">Add Video</button>
                </div>
            </div>
            <div id="videos-container" class="videos-container"></div>
        </div>
        
    </main>
    
    <!-- Footer -->
    <footer class="footer">
        <button id="my-info-btn" class="glass-btn">My info</button>
    </footer>
    
    <!-- Modals -->
    
    <!-- Admin login modal -->
    <div id="admin-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Admin Access</h2>
                <button class="close-btn" data-modal="admin-modal">&times;</button>
            </div>
            <div class="modal-body">
                <form id="admin-form">
                    <input type="password" id="admin-password" placeholder="Enter admin password" required>
                    <button type="submit" class="glass-btn">Login</button>
                </form>
            </div>
        </div>
    </div>
    
    <!-- My info modal -->
    <div id="info-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Contact Info</h2>
                <button class="close-btn" data-modal="info-modal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="contact-grid">
                    <a href="mailto:sam.pinkelman@gmail.com" class="contact-item">
                        <img src="icons/gmail.svg" alt="Email" class="contact-icon">
                        <span>sam.pinkelman@gmail.com</span>
                    </a>
                    <a href="https://www.instagram.com/samuelpinkelman/" target="_blank" rel="noopener" class="contact-item">
                        <img src="icons/instagram.svg" alt="Instagram" class="contact-icon">
                        <span>@samuelpinkelman</span>
                    </a>
                    <a href="https://x.com/PinkelmanSam" target="_blank" rel="noopener" class="contact-item">
                        <img src="icons/twitter.svg" alt="X/Twitter" class="contact-icon">
                        <span>@PinkelmanSam</span>
                    </a>
                    <a href="https://www.linkedin.com/in/sam-pinkelman-9b2a5b254/" target="_blank" rel="noopener" class="contact-item">
                        <img src="icons/linkedin.svg" alt="LinkedIn" class="contact-icon">
                        <span>Sam Pinkelman</span>
                    </a>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Branding panel modal -->
    <div id="branding-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Branding Assets</h2>
                <button class="close-btn" data-modal="branding-modal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="branding-grid">
                    <div class="branding-item">
                        <h3>Background Image</h3>
                        <div id="bg-preview" class="asset-preview"></div>
                        <input type="file" id="bg-upload" accept="image/*" style="display: none;">
                        <button class="glass-btn" onclick="document.getElementById('bg-upload').click()">Upload</button>
                    </div>
                    <div class="branding-item">
                        <h3>Header Logo</h3>
                        <div id="logo-preview" class="asset-preview"></div>
                        <input type="file" id="logo-upload" accept="image/*" style="display: none;">
                        <button class="glass-btn" onclick="document.getElementById('logo-upload').click()">Upload</button>
                    </div>
                    <div class="branding-item">
                        <h3>Favicon</h3>
                        <div id="favicon-preview" class="asset-preview"></div>
                        <input type="file" id="favicon-upload" accept="image/*" style="display: none;">
                        <button class="glass-btn" onclick="document.getElementById('favicon-upload').click()">Upload</button>
                    </div>
                </div>
                
                <!-- Data backup section -->
                <div class="backup-section">
                    <h3>Data Backup</h3>
                    <div class="backup-actions">
                        <button id="export-data-btn" class="glass-btn">Export All Data</button>
                        <button id="import-data-btn" class="glass-btn">Import Data</button>
                        <input type="file" id="import-file-input" accept=".json" style="display: none;">
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Album creation modal -->
    <div id="album-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Create Album</h2>
                <button class="close-btn" data-modal="album-modal">&times;</button>
            </div>
            <div class="modal-body">
                <form id="album-form">
                    <input type="text" id="album-name" placeholder="Album name" required>
                    <button type="submit" class="glass-btn">Create</button>
                </form>
            </div>
        </div>
    </div>
    
    <!-- Photo gallery modal -->
    <div id="gallery-modal" class="modal full-screen">
        <div class="modal-content full-screen">
            <div class="modal-header">
                <h2 id="gallery-title">Album</h2>
                <div class="gallery-controls">
                    <button id="gallery-admin-toggle" class="glass-btn admin-only">Edit Mode</button>
                    <button class="close-btn" data-modal="gallery-modal">&times;</button>
                </div>
            </div>
            <div class="modal-body">
                <div class="gallery-admin-controls admin-only">
                    <button id="add-photos-btn" class="glass-btn">Add Photos</button>
                    <input type="file" id="photos-file-input" accept="image/*" multiple style="display: none;">
                    <button id="rename-album-btn" class="glass-btn">Rename Album</button>
                    <button id="delete-album-btn" class="glass-btn danger">Delete Album</button>
                </div>
                <div id="gallery-grid" class="gallery-grid"></div>
            </div>
        </div>
    </div>
    
    <!-- Lightbox modal -->
    <div id="lightbox-modal" class="modal lightbox">
        <div class="lightbox-content">
            <button class="close-btn lightbox-close" data-modal="lightbox-modal">&times;</button>
            <button class="lightbox-nav lightbox-prev" id="lightbox-prev">&#8249;</button>
            <button class="lightbox-nav lightbox-next" id="lightbox-next">&#8250;</button>
            <img id="lightbox-image" src="" alt="">
            <div class="lightbox-counter" id="lightbox-counter"></div>
        </div>
    </div>
    
    <!-- Essay reader modal -->
    <div id="essay-reader-modal" class="modal full-screen">
        <div class="modal-content full-screen">
            <div class="modal-header">
                <h2 id="essay-title">Essay</h2>
                <button class="close-btn" data-modal="essay-reader-modal">&times;</button>
            </div>
            <div class="modal-body">
                <iframe id="essay-iframe" src="" style="width: 100%; height: 100%; border: none;"></iframe>
            </div>
        </div>
    </div>
    
    <!-- Add video modal -->
    <div id="add-video-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Add Video</h2>
                <button class="close-btn" data-modal="add-video-modal">&times;</button>
            </div>
            <div class="modal-body">
                <form id="add-video-form">
                    <input type="url" id="video-url" placeholder="YouTube or Vimeo URL" required>
                    <button type="submit" class="glass-btn">Add Video</button>
                </form>
            </div>
        </div>
    </div>
    
    <!-- Generic confirm modal -->
    <div id="confirm-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="confirm-title">Confirm</h2>
            </div>
            <div class="modal-body">
                <p id="confirm-message"></p>
                <div class="confirm-actions">
                    <button id="confirm-yes" class="glass-btn danger">Yes</button>
                    <button id="confirm-no" class="glass-btn">No</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Toast notifications -->
    <div id="toast-container" class="toast-container"></div>
    
    <!-- Branding gear icon (admin only) -->
    <button id="branding-gear" class="gear-btn admin-only" aria-label="Branding Settings">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="3"></circle>
            <path d="M12 1v6M12 17v6M4.22 4.22l4.24 4.24M15.54 15.54l4.24 4.24M1 12h6M17 12h6M4.22 19.78l4.24-4.24M15.54 8.46l4.24-4.24"></path>
        </svg>
    </button>

    <!-- Scripts -->
    <!-- Firebase SDK -->
    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
        import { 
            getFirestore,
            doc, getDoc, setDoc, updateDoc, deleteDoc,
            collection, getDocs, addDoc, query, orderBy, where, onSnapshot
        } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';
        import { 
            getStorage,
            ref, uploadBytes, getDownloadURL, deleteObject
        } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-storage.js';
        import { 
            getAuth,
            signInWithEmailAndPassword, signOut, onAuthStateChanged
        } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js';

        // Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyChGb6kstsKlm3YgjAJ4jKOw0_cjTTNH8A",
            authDomain: "sam-pinkelman-portfolio.firebaseapp.com",
            projectId: "sam-pinkelman-portfolio",
            storageBucket: "sam-pinkelman-portfolio.firebasestorage.app",
            messagingSenderId: "1000268904259",
            appId: "1:1000268904259:web:fd6e34a15a6a89d86de1f6"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const firestore = getFirestore(app);
        const storage = getStorage(app);
        const auth = getAuth(app);

        // Make Firebase services available globally
        window.firebaseApp = app;
        window.firestore = firestore;
        window.firebaseStorage = storage;
        window.firebaseAuth = auth;
        
        // Make Firebase functions available globally
        window.FirebaseFunctions = {
            // Firestore
            doc, getDoc, setDoc, updateDoc, deleteDoc,
            collection, getDocs, addDoc, query, orderBy, where, onSnapshot,
            // Storage
            ref, uploadBytes, getDownloadURL, deleteObject,
            // Auth
            signInWithEmailAndPassword, signOut, onAuthStateChanged
        };

        // Signal that Firebase is ready
        window.firebaseReady = true;
        console.log('Firebase initialized successfully');
    </script>
    
    <script src="db.js"></script>
    <script src="firebase-db.js"></script>
    <script src="utils.js"></script>
    <script src="app.js"></script>
</body>
</html>